_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{HGOk:function(e,t,a){"use strict";a.r(t);var s=a("nKUr"),n=a("hlie"),r=a("UIRo").a.get("CURRENT_WORKING_DIRECTORY"),c=function(e){var t=e.path,a=e.children;return Object(s.jsx)(n.a,{href:"vscode://file/".concat(r,"/").concat(t),children:a})},i=a("30+C"),o=a("wx14"),l=a("Ff2n"),d=a("q1tI"),h=(a("17x9"),a("iuhU")),p=a("H2TA"),u=a("ofer"),j=d.forwardRef((function(e,t){var a=e.action,s=e.avatar,n=e.classes,r=e.className,c=e.component,i=void 0===c?"div":c,p=e.disableTypography,j=void 0!==p&&p,b=e.subheader,m=e.subheaderTypographyProps,x=e.title,f=e.titleTypographyProps,O=Object(l.a)(e,["action","avatar","classes","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),g=x;null==g||g.type===u.a||j||(g=d.createElement(u.a,Object(o.a)({variant:s?"body2":"h5",className:n.title,component:"span",display:"block"},f),g));var y=b;return null==y||y.type===u.a||j||(y=d.createElement(u.a,Object(o.a)({variant:s?"body2":"body1",className:n.subheader,color:"textSecondary",component:"span",display:"block"},m),y)),d.createElement(i,Object(o.a)({className:Object(h.a)(n.root,r),ref:t},O),s&&d.createElement("div",{className:n.avatar},s),d.createElement("div",{className:n.content},g,y),a&&d.createElement("div",{className:n.action},a))})),b=Object(p.a)({root:{display:"flex",alignItems:"center",padding:16},avatar:{flex:"0 0 auto",marginRight:16},action:{flex:"0 0 auto",alignSelf:"flex-start",marginTop:-8,marginRight:-8},content:{flex:"1 1 auto"},title:{},subheader:{}},{name:"MuiCardHeader"})(j),m=a("oa/T");var x=d.createContext({}),f=d.forwardRef((function(e,t){var a=e.children,s=e.classes,n=e.className,r=e.component,c=void 0===r?"ul":r,i=e.dense,p=void 0!==i&&i,u=e.disablePadding,j=void 0!==u&&u,b=e.subheader,m=Object(l.a)(e,["children","classes","className","component","dense","disablePadding","subheader"]),f=d.useMemo((function(){return{dense:p}}),[p]);return d.createElement(x.Provider,{value:f},d.createElement(c,Object(o.a)({className:Object(h.a)(s.root,n,p&&s.dense,!j&&s.padding,b&&s.subheader),ref:t},m),b,a))})),O=Object(p.a)({root:{listStyle:"none",margin:0,padding:0,position:"relative"},padding:{paddingTop:8,paddingBottom:8},dense:{},subheader:{paddingTop:0}},{name:"MuiList"})(f),g=a("HqPu"),y=a.n(g),v=a("XrP9"),T=function(e){return"timeslot-".concat(e)},w=function(e){var t=e.items;return Object(s.jsx)(O,{className:"timeSlots",datacy:"timeslot-list",children:t.map((function(e){return Object(s.jsxs)(i.a,{datacy:T(e.id),className:"timeSlot__item btn",children:[Object(s.jsx)(b,{avatar:Object(s.jsx)(y.a,{}),title:Object(s.jsx)(u.a,{datacy:"".concat(T(e.id),"-range"),children:Object(v.a)({from:new Date(e.startDate),to:new Date(e.endDate)})})}),Object(s.jsx)(m.a,{children:Object(s.jsx)("pre",{children:Object(s.jsx)("code",{children:JSON.stringify(e,null,2)})})})]},e.id)}))})},k=a("nrjT"),N=a("/MKj"),_=a("HQJr"),E=function(){var e=Object(N.b)(),t=Object(N.c)((function(e){return _.c.selectAll(e.timeslots)}));return Object(d.useEffect)((function(){e(Object(_.b)())}),[]),Object(s.jsxs)("div",{className:"page",children:[Object(s.jsxs)("section",{datacy:"intro",children:[Object(s.jsxs)("header",{children:[Object(s.jsx)("h1",{children:"Welcome to the timeslot page"}),Object(s.jsx)("h2",{children:"A basic example of how we make Next.js and Redux work together"})]}),Object(s.jsxs)("article",{children:[Object(s.jsx)("h3",{children:"File structure"}),Object(s.jsxs)("section",{children:[Object(s.jsx)("h4",{children:"Next.js"}),Object(s.jsxs)("p",{children:[Object(s.jsx)(n.a,{href:"https://nextjs.org/",target:"_blank",children:"Next.js"})," ","is a"," ",Object(s.jsx)(n.a,{href:"https://reactjs.org/",target:"_blank",children:"React"})," ","framework that allows to create both server side and statically generated websites."]}),Object(s.jsxs)("p",{children:['Pages are defined in the "src/pages" folder. Next.js handles all the route definitions. For instance you can take a look at "/timeslots" page:'," ",Object(s.jsx)(c,{path:"src/pages/timeslots.tsx",children:'"src/pages/timeslots.tsx"'}),"."]}),Object(s.jsxs)("p",{children:['All the components (except for pages components) are defined in the "src/components" folder. For instance you can take a look at "TimeSlots.tsx" component:'," ",Object(s.jsx)(c,{path:"src/components/TimeSlots.tsx",children:'"src/components/TimeSlots.tsx"'}),"."]})]}),Object(s.jsxs)("section",{children:[Object(s.jsx)("h4",{children:"Backend"}),Object(s.jsxs)("p",{children:["Our database is managed by Prisma which dynamically generates an embeded SQLite database, migrations and typings according to schema defined in"," ",Object(s.jsx)(c,{path:"prisma/schema.prisma",children:'"prisma/schema.prisma"'}),"."]}),Object(s.jsxs)("p",{children:['The endpoints are directly handled by Next.js and are defined in the "src/pages/api" directory. For instance you can take a look at "/timeslots" endpoint:'," ",Object(s.jsx)(c,{path:"src/pages/api/timeslots.ts",children:'"src/pages/api/timeslots.ts"'}),"."]}),Object(s.jsxs)("p",{children:['To restore the database, run "yarn seed-db" which is defined in'," ",Object(s.jsx)(c,{path:"package.json:13:54",children:'"package.json"'}),"."]})]}),Object(s.jsxs)("section",{children:[Object(s.jsx)("h4",{children:"Redux store"}),Object(s.jsx)("p",{children:'You can find everything related to the Redux store in the "src/store" directory.'}),Object(s.jsxs)("p",{children:["The store itself is exported from"," ",Object(s.jsx)(c,{path:"src/store/index.ts",children:'"src/store/index.ts"'}),"."]}),Object(s.jsxs)("p",{children:["We used"," ",Object(s.jsx)(n.a,{href:"https://redux-toolkit.js.org/",target:"_blank",children:"@reduxjs/toolkit"})," ",'to spare some boilerplate code in the example "timeslot" slice (see'," ",Object(s.jsx)(c,{path:"src/store/timeslots.ts",children:'"src/store/timeslots.ts"'})," ","for implementation). The library generates extensible reducers, actions, and selectors. Asynchronous side effects are handled by the"," ",Object(s.jsx)(n.a,{href:"https://github.com/reduxjs/redux-thunk",target:"_blank",children:"redux thunk middleware"}),"."]}),Object(s.jsxs)("p",{children:["In order to add a new reducer to your root reducer, add it to"," ",Object(s.jsx)(c,{path:"src/store/reducers.ts:4:32",children:'"src/store/reducers.ts"'}),"."]})]}),Object(s.jsxs)("section",{children:[Object(s.jsx)("h4",{children:"Tests"}),Object(s.jsxs)("p",{children:["The end to end tests are implemented with"," ",Object(s.jsx)(n.a,{href:"https://www.cypress.io/",target:"_blank",children:"Cypress"})," ",'and are defined in the "cypress/integration" directory. For instance you can take a look at the tests of the "/timeslots" page:'," ",Object(s.jsx)(c,{path:"cypress/integration/timeslots.spec.ts",children:'"cypress/integration/timeslots.spec.ts"'}),"."]}),Object(s.jsxs)("p",{children:['We added a custom cypress command named "pick". It queries one or several elements that have the attribute "datacy" matching the argument passed to the command. ',Object(s.jsx)("br",{}),"Ex: cy.pick('timeslot-list') returns all elements which datacy attribute is equal to \"timeslot-list\". ",Object(s.jsx)("br",{}),'The "pick" command is defined in',Object(s.jsx)(c,{path:"cypress/support/commands.ts",children:'"cypress/support/commands.ts"'}),"."]}),Object(s.jsx)("p",{children:'To execute the tests: run "yarn dev" to launch the app and in parallel in an other terminal tab run "yarn test" to launch Cypress.'})]})]})]}),Object(s.jsx)(k.a,{name:"timeslots",title:"TimeSlot List",className:"timeSlot__list",children:Object(s.jsx)(w,{items:t})})]})};E.pageTitle="Time slots",E.pageSubtitle="A simple example";t.default=E},HQJr:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"c",(function(){return p}));var s=a("vJKn"),n=a.n(s),r=a("rg98"),c=a("i7Pf"),i=a("UIRo"),o=a("nJKy"),l=i.a.get("SERVER_API_ENDPOING","/api"),d=Object(c.b)("getTimeSlots",Object(r.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(l,"/timeslots"));case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",Object(o.a)(a));case 7:case"end":return e.stop()}}),e)})))),h=Object(c.d)({sortComparer:function(e,t){return new Date(e.startDate).getTime()-new Date(t.startDate).getTime()}}),p=h.getSelectors(),u=Object(c.e)({name:"timeslots",initialState:h.getInitialState({loading:!1,error:null}),reducers:{},extraReducers:function(e){e.addCase(d.pending,(function(e){e.loading=!0})),e.addCase(d.fulfilled,(function(e,t){h.setAll(e,t.payload),e.error=null,e.loading=!1})),e.addCase(d.rejected,(function(e,t){e.error=t.error,e.loading=!1}))}});t.a=u},HqPu:function(e,t,a){"use strict";var s=a("TqRt"),n=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),c=(0,s(a("8/g6")).default)(r.createElement("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z"}),"CalendarToday");t.default=c},hlie:function(e,t,a){"use strict";var s=a("wx14"),n=a("Ff2n"),r=a("q1tI"),c=(a("17x9"),a("iuhU")),i=a("NqtD"),o=a("H2TA"),l=a("G7As"),d=a("bfFb"),h=a("ofer"),p=r.forwardRef((function(e,t){var a=e.classes,o=e.className,p=e.color,u=void 0===p?"primary":p,j=e.component,b=void 0===j?"a":j,m=e.onBlur,x=e.onFocus,f=e.TypographyClasses,O=e.underline,g=void 0===O?"hover":O,y=e.variant,v=void 0===y?"inherit":y,T=Object(n.a)(e,["classes","className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"]),w=Object(l.a)(),k=w.isFocusVisible,N=w.onBlurVisible,_=w.ref,E=r.useState(!1),R=E[0],S=E[1],P=Object(d.a)(t,_);return r.createElement(h.a,Object(s.a)({className:Object(c.a)(a.root,a["underline".concat(Object(i.a)(g))],o,R&&a.focusVisible,"button"===b&&a.button),classes:f,color:u,component:b,onBlur:function(e){R&&(N(),S(!1)),m&&m(e)},onFocus:function(e){k(e)&&S(!0),x&&x(e)},ref:P,variant:v},T))}));t.a=Object(o.a)({root:{},underlineNone:{textDecoration:"none"},underlineHover:{textDecoration:"none","&:hover":{textDecoration:"underline"}},underlineAlways:{textDecoration:"underline"},button:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none","&::-moz-focus-inner":{borderStyle:"none"},"&$focusVisible":{outline:"auto"}},focusVisible:{}},{name:"MuiLink"})(p)},"l/Ag":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/timeslots",function(){return a("HGOk")}])}},[["l/Ag",0,2,1,3,5,6]]]);